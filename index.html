<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>QUANTUM AI Trading System</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --bg-primary: #0B0F19;
            --bg-secondary: #141922;
            --bg-tertiary: #1A1F2E;
            --accent-primary: #00F5FF;
            --accent-success: #00FF88;
            --accent-danger: #FF3366;
            --accent-warning: #FFB800;
            --text-primary: #FFFFFF;
            --text-secondary: #8E9AAB;
            --border-primary: rgba(255, 255, 255, 0.08);
            --shadow-glow: 0 0 40px rgba(0, 245, 255, 0.15);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* Mobile-First Responsive Container */
        .app-container {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-primary);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .header-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-success));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            animation: pulse 3s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: var(--shadow-glow); }
            50% { transform: scale(1.05); }
        }

        .logo-text h1 {
            font-size: 16px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-success));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--accent-danger);
            animation: blink 2s infinite;
        }

        .status-dot.connected {
            background: var(--accent-success);
            animation: none;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Search */
        .search-container {
            position: relative;
            width: 100%;
        }

        .search-input {
            width: 100%;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 8px;
            padding: 10px 40px 10px 12px;
            font-size: 14px;
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .search-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
        }

        .dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 8px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 4px;
            display: none;
            z-index: 1001;
        }

        .dropdown.active {
            display: block;
        }

        .dropdown-item {
            padding: 12px;
            border-bottom: 1px solid var(--border-primary);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dropdown-item:active {
            background: var(--bg-tertiary);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        /* AI Panel */
        .ai-panel {
            background: linear-gradient(135deg, rgba(0, 245, 255, 0.1), rgba(0, 255, 136, 0.05));
            border: 2px solid var(--accent-primary);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
        }

        .ai-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent-primary), transparent);
            animation: shine 3s linear infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .ai-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .ai-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-success));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .ai-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--accent-primary);
        }

        .ai-status {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .ai-message {
            font-size: 13px;
            line-height: 1.6;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .signal-box {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .signal-label {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
        }

        .signal-value {
            font-size: 18px;
            font-weight: 800;
            padding: 6px 16px;
            border-radius: 6px;
        }

        .signal-value.neutral {
            background: rgba(142, 154, 171, 0.15);
            color: var(--text-secondary);
        }

        .signal-value.bullish {
            background: rgba(0, 255, 136, 0.15);
            color: var(--accent-success);
        }

        .signal-value.bearish {
            background: rgba(255, 51, 102, 0.15);
            color: var(--accent-danger);
        }

        /* Trade Recommendation */
        .trade-rec {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--border-primary);
        }

        .trade-rec.bullish {
            border-color: var(--accent-success);
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.05), transparent);
        }

        .trade-rec.bearish {
            border-color: var(--accent-danger);
            background: linear-gradient(135deg, rgba(255, 51, 102, 0.05), transparent);
        }

        .rec-title {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .rec-action {
            font-size: 20px;
            font-weight: 800;
            margin-bottom: 12px;
        }

        .rec-action.bullish { color: var(--accent-success); }
        .rec-action.bearish { color: var(--accent-danger); }

        .rec-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 12px;
        }

        .rec-detail {
            background: var(--bg-tertiary);
            padding: 8px;
            border-radius: 6px;
        }

        .rec-detail-label {
            font-size: 10px;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .rec-detail-value {
            font-size: 14px;
            font-weight: 700;
            font-family: 'Courier New', monospace;
        }

        /* Price Display */
        .price-display {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            text-align: center;
            border: 1px solid var(--border-primary);
        }

        .symbol-name {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .current-price {
            font-size: 32px;
            font-weight: 900;
            font-family: 'Courier New', monospace;
            color: var(--accent-primary);
            margin-bottom: 8px;
        }

        .price-change {
            font-size: 16px;
            font-weight: 700;
            padding: 6px 12px;
            border-radius: 6px;
            display: inline-block;
        }

        .price-change.positive {
            background: rgba(0, 255, 136, 0.15);
            color: var(--accent-success);
        }

        .price-change.negative {
            background: rgba(255, 51, 102, 0.15);
            color: var(--accent-danger);
        }

        /* Chart */
        .chart-container {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--border-primary);
            height: 300px;
        }

        .chart-canvas {
            width: 100% !important;
            height: 100% !important;
        }

        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .metric-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 12px;
            border: 1px solid var(--border-primary);
        }

        .metric-label {
            font-size: 10px;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: 6px;
            font-weight: 600;
        }

        .metric-value {
            font-size: 20px;
            font-weight: 800;
            font-family: 'Courier New', monospace;
            margin-bottom: 4px;
        }

        .metric-value.positive { color: var(--accent-success); }
        .metric-value.negative { color: var(--accent-danger); }
        .metric-value.warning { color: var(--accent-warning); }
        .metric-value.neutral { color: var(--text-primary); }

        .metric-subtitle {
            font-size: 10px;
            color: var(--text-tertiary);
        }

        /* Indicators Section */
        .indicators-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--border-primary);
        }

        .section-title {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .indicator-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-primary);
        }

        .indicator-row:last-child {
            border-bottom: none;
        }

        .indicator-name {
            font-size: 13px;
            color: var(--text-primary);
            font-weight: 500;
        }

        .indicator-signal {
            font-size: 12px;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 6px;
        }

        .indicator-signal.bullish {
            background: rgba(0, 255, 136, 0.15);
            color: var(--accent-success);
        }

        .indicator-signal.bearish {
            background: rgba(255, 51, 102, 0.15);
            color: var(--accent-danger);
        }

        .indicator-signal.neutral {
            background: rgba(142, 154, 171, 0.15);
            color: var(--text-secondary);
        }

        /* Confidence Score */
        .confidence-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--border-primary);
        }

        .confidence-score {
            font-size: 48px;
            font-weight: 900;
            text-align: center;
            margin: 16px 0;
            font-family: 'Courier New', monospace;
        }

        .confidence-bar {
            height: 12px;
            background: var(--bg-primary);
            border-radius: 6px;
            overflow: hidden;
            margin: 12px 0;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-danger), var(--accent-warning), var(--accent-success));
            transition: width 0.5s ease;
            position: relative;
        }

        /* Loading */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(11, 15, 25, 0.98);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            flex-direction: column;
            gap: 20px;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 4px solid var(--bg-tertiary);
            border-top-color: var(--accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Alert */
        .alert {
            position: fixed;
            top: 80px;
            left: 16px;
            right: 16px;
            background: var(--bg-secondary);
            border-left: 4px solid var(--accent-primary);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            z-index: 9999;
            animation: slideDown 0.3s ease;
            display: none;
        }

        .alert.show {
            display: block;
        }

        .alert.success { border-left-color: var(--accent-success); }
        .alert.danger { border-left-color: var(--accent-danger); }

        @keyframes slideDown {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .alert-title {
            font-size: 13px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .alert-message {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Desktop Responsive */
        @media (min-width: 768px) {
            .header {
                padding: 20px 32px;
            }

            .header-row {
                margin-bottom: 16px;
            }

            .logo-icon {
                width: 48px;
                height: 48px;
                font-size: 24px;
            }

            .logo-text h1 {
                font-size: 24px;
            }

            .search-input {
                font-size: 15px;
                padding: 12px 50px 12px 16px;
            }

            .main-content {
                padding: 24px;
                max-width: 1400px;
                margin: 0 auto;
            }

            .content-grid {
                display: grid;
                grid-template-columns: 2fr 1fr;
                gap: 24px;
            }

            .metrics-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 16px;
            }

            .chart-container {
                height: 400px;
            }
        }

        @media (min-width: 1200px) {
            .metrics-grid {
                grid-template-columns: repeat(4, 1fr);
            }

            .chart-container {
                height: 500px;
            }
        }

        /* Utility */
        .text-center { text-align: center; }
        .mb-1 { margin-bottom: 8px; }
        .mb-2 { margin-bottom: 16px; }
        .mt-2 { margin-top: 16px; }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loading">
        <div class="loader"></div>
        <div class="loading-text">Initializing QUANTUM AI...</div>
        <div style="font-size: 12px; color: var(--text-secondary);">Loading 600+ symbols & ML models</div>
    </div>

    <!-- Alert -->
    <div class="alert" id="alert">
        <div class="alert-title" id="alertTitle">Alert</div>
        <div class="alert-message" id="alertMessage">Message</div>
    </div>

    <!-- App Container -->
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <div class="header-row">
                <div class="logo">
                    <div class="logo-icon">üß†</div>
                    <div class="logo-text">
                        <h1>QUANTUM AI</h1>
                    </div>
                </div>
                <div class="status-dot" id="statusDot"></div>
            </div>
            <div class="search-container">
                <input 
                    type="text" 
                    class="search-input" 
                    id="symbolSearch" 
                    placeholder="Search any crypto (BTC, ETH, WIF, SOL...)"
                    autocomplete="off"
                >
                <span class="search-icon">üîç</span>
                <div class="dropdown" id="dropdown"></div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- AI Panel -->
            <div class="ai-panel">
                <div class="ai-header">
                    <div class="ai-avatar">ü§ñ</div>
                    <div>
                        <div class="ai-title">QUANTUM AI Assistant</div>
                        <div class="ai-status" id="aiStatus">Analyzing...</div>
                    </div>
                </div>
                <div class="ai-message" id="aiMessage">
                    Initializing advanced ML models and order flow analysis...
                </div>
                <div class="signal-box">
                    <span class="signal-label">Market Signal</span>
                    <span class="signal-value neutral" id="marketSignal">NEUTRAL</span>
                </div>
            </div>

            <!-- Trade Recommendation -->
            <div class="trade-rec" id="tradeRec" style="display: none;">
                <div class="rec-title">RECOMMENDED ACTION</div>
                <div class="rec-action" id="recAction">WAIT</div>
                <div id="recDetails"></div>
            </div>

            <!-- Price Display -->
            <div class="price-display">
                <div class="symbol-name" id="symbolName">WIF/USDT</div>
                <div class="current-price" id="currentPrice">$0.0000</div>
                <div class="price-change" id="priceChange">+0.00%</div>
            </div>

            <!-- Confidence Score -->
            <div class="confidence-section">
                <div class="section-title">
                    <span>üéØ</span>
                    ML CONFIDENCE SCORE
                </div>
                <div class="confidence-score" id="confidenceScore">0%</div>
                <div class="confidence-bar">
                    <div class="confidence-fill" id="confidenceFill" style="width: 0%;"></div>
                </div>
                <div class="text-center" style="font-size: 12px; color: var(--text-secondary);" id="confidenceText">
                    Calculating probability...
                </div>
            </div>

            <!-- Chart -->
            <div class="chart-container">
                <canvas id="mainChart" class="chart-canvas"></canvas>
            </div>

            <!-- Metrics Grid -->
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-label">Cumulative Delta</div>
                    <div class="metric-value neutral" id="deltaValue">0.00</div>
                    <div class="metric-subtitle" id="deltaSubtitle">Balanced</div>
                </div>

                <div class="metric-card">
                    <div class="metric-label">Order Imbalance</div>
                    <div class="metric-value neutral" id="imbalanceValue">50%</div>
                    <div class="metric-subtitle" id="imbalanceSubtitle">Balanced</div>
                </div>

                <div class="metric-card">
                    <div class="metric-label">Volume (5min)</div>
                    <div class="metric-value neutral" id="volumeValue">$0</div>
                    <div class="metric-subtitle">Normal</div>
                </div>

                <div class="metric-card">
                    <div class="metric-label">Buy/Sell Ratio</div>
                    <div class="metric-value neutral" id="ratioValue">1.00</div>
                    <div class="metric-subtitle" id="ratioSubtitle">Balanced</div>
                </div>
            </div>

            <!-- Traditional TA Indicators -->
            <div class="indicators-section">
                <div class="section-title">
                    <span>üìà</span>
                    TECHNICAL INDICATORS
                </div>
                <div class="indicator-row">
                    <span class="indicator-name">RSI (14)</span>
                    <span class="indicator-signal neutral" id="rsiSignal">NEUTRAL</span>
                </div>
                <div class="indicator-row">
                    <span class="indicator-name">MACD</span>
                    <span class="indicator-signal neutral" id="macdSignal">NEUTRAL</span>
                </div>
                <div class="indicator-row">
                    <span class="indicator-name">MA Cross (20/50)</span>
                    <span class="indicator-signal neutral" id="maSignal">NEUTRAL</span>
                </div>
                <div class="indicator-row">
                    <span class="indicator-name">Bollinger Bands</span>
                    <span class="indicator-signal neutral" id="bbSignal">NEUTRAL</span>
                </div>
                <div class="indicator-row">
                    <span class="indicator-name">Volume Trend</span>
                    <span class="indicator-signal neutral" id="volSignal">NEUTRAL</span>
                </div>
            </div>

            <!-- Order Flow Indicators -->
            <div class="indicators-section">
                <div class="section-title">
                    <span>üìä</span>
                    ORDER FLOW ANALYSIS
                </div>
                <div class="indicator-row">
                    <span class="indicator-name">Delta Divergence</span>
                    <span class="indicator-signal neutral" id="divSignal">NONE</span>
                </div>
                <div class="indicator-row">
                    <span class="indicator-name">Large Orders</span>
                    <span class="indicator-signal neutral" id="largeSignal">NORMAL</span>
                </div>
                <div class="indicator-row">
                    <span class="indicator-name">POC Distance</span>
                    <span class="indicator-signal neutral" id="pocSignal">AWAY</span>
                </div>
                <div class="indicator-row">
                    <span class="indicator-name">Absorption</span>
                    <span class="indicator-signal neutral" id="absSignal">NONE</span>
                </div>
            </div>

            <!-- ML Prediction -->
            <div class="indicators-section">
                <div class="section-title">
                    <span>üß†</span>
                    ML PREDICTION
                </div>
                <div class="indicator-row">
                    <span class="indicator-name">Next 5min Direction</span>
                    <span class="indicator-signal neutral" id="pred5min">CALCULATING...</span>
                </div>
                <div class="indicator-row">
                    <span class="indicator-name">Next 15min Direction</span>
                    <span class="indicator-signal neutral" id="pred15min">CALCULATING...</span>
                </div>
                <div class="indicator-row">
                    <span class="indicator-name">Reversal Probability</span>
                    <span class="indicator-signal neutral" id="revProb">--</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== CONFIGURATION ====================
        let ws = null;
        let wsDepth = null;
        let currentSymbol = 'WIFUSDT';
        let allSymbols = [];
        let reconnectAttempts = 0;
        const MAX_RECONNECT_ATTEMPTS = 5;
        let reconnectTimer = null;
        
        // ==================== DATA STORAGE ====================
        let orderBook = { bids: [], asks: [] };
        let cumulativeDelta = 0;
        let deltaHistory = [];
        let priceHistory = [];
        let volumeHistory = [];
        let timestamps = [];
        let buyVolume = 0;
        let sellVolume = 0;
        let lastPrice = 0;
        let startPrice = 0;
        let volumeByPrice = {};
        let largeOrders = 0;
        let rsiValues = [];
        let emaShort = [];
        let emaLong = [];

        // ==================== CHART SETUP ====================
        const ctx = document.getElementById('mainChart').getContext('2d');
        const mainChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Cumulative Delta',
                    data: [],
                    borderColor: '#00F5FF',
                    backgroundColor: 'rgba(0, 245, 255, 0.1)',
                    borderWidth: 2,
                    fill: true,
                    tension: 0.4,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: '#141922',
                        titleColor: '#00F5FF',
                        bodyColor: '#FFFFFF',
                        padding: 8,
                        displayColors: false
                    }
                },
                scales: {
                    x: { display: false },
                    y: {
                        grid: { color: 'rgba(255, 255, 255, 0.05)' },
                        ticks: {
                            color: '#8E9AAB',
                            font: { size: 10, family: 'Courier New' }
                        }
                    }
                }
            }
        });

        // ==================== FETCH SYMBOLS ====================
        async function fetchSymbols() {
            try {
                const response = await fetch('https://api.binance.com/api/v3/ticker/24hr');
                const data = await response.json();
                
                allSymbols = data
                    .filter(s => s.symbol.endsWith('USDT'))
                    .map(s => ({
                        symbol: s.symbol,
                        price: parseFloat(s.lastPrice),
                        change: parseFloat(s.priceChangePercent)
                    }))
                    .sort((a, b) => b.change - a.change);
                
                console.log(`‚úÖ Loaded ${allSymbols.length} symbols`);
                return true;
            } catch (error) {
                console.error('Error fetching symbols:', error);
                showAlert('danger', 'Error', 'Failed to load symbols. Retrying...');
                return false;
            }
        }

        // ==================== SYMBOL SEARCH ====================
        const searchInput = document.getElementById('symbolSearch');
        const dropdown = document.getElementById('dropdown');

        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toUpperCase();
            
            if (query.length < 1) {
                dropdown.classList.remove('active');
                return;
            }

            const filtered = allSymbols
                .filter(s => s.symbol.includes(query))
                .slice(0, 15);

            if (filtered.length > 0) {
                dropdown.innerHTML = filtered.map(s => `
                    <div class="dropdown-item" data-symbol="${s.symbol}">
                        <span style="font-weight: 600;">${s.symbol.replace('USDT', '/USDT')}</span>
                        <span style="font-family: 'Courier New'; font-size: 12px; color: ${s.change >= 0 ? '#00FF88' : '#FF3366'};">
                            ${s.change >= 0 ? '+' : ''}${s.change.toFixed(2)}%
                        </span>
                    </div>
                `).join('');
                dropdown.classList.add('active');

                document.querySelectorAll('.dropdown-item').forEach(item => {
                    item.addEventListener('click', () => {
                        selectSymbol(item.dataset.symbol);
                    });
                });
            } else {
                dropdown.classList.remove('active');
            }
        });

        document.addEventListener('click', (e) => {
            if (!searchInput.contains(e.target) && !dropdown.contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });

        function selectSymbol(symbol) {
            currentSymbol = symbol;
            searchInput.value = '';
            dropdown.classList.remove('active');
            document.getElementById('symbolName').textContent = symbol.replace('USDT', '/USDT');
            resetData();
            connectWebSocket();
            showAlert('success', 'Symbol Changed', `Now tracking ${symbol.replace('USDT', '/USDT')}`);
        }

        function resetData() {
            cumulativeDelta = 0;
            deltaHistory = [];
            priceHistory = [];
            volumeHistory = [];
            timestamps = [];
            buyVolume = 0;
            sellVolume = 0;
            volumeByPrice = {};
            largeOrders = 0;
            rsiValues = [];
            emaShort = [];
            emaLong = [];
        }

        // ==================== WEBSOCKET CONNECTION (IMPROVED) ====================
        function connectWebSocket() {
            const symbol = currentSymbol.toLowerCase();
            
            // Close existing connections
            if (ws) {
                ws.onclose = null;
                ws.close();
            }
            if (wsDepth) {
                wsDepth.onclose = null;
                wsDepth.close();
            }

            // Clear reconnect timer
            if (reconnectTimer) {
                clearTimeout(reconnectTimer);
                reconnectTimer = null;
            }

            updateStatus(false, 'Connecting...');

            // Trades WebSocket
            ws = new WebSocket(`wss://stream.binance.com:9443/ws/${symbol}@trade`);
            
            ws.onopen = () => {
                console.log('‚úÖ Trades WebSocket connected');
                reconnectAttempts = 0;
                updateStatus(true, 'Connected');
            };

            ws.onmessage = (event) => {
                try {
                    const data = JSON.parse(event.data);
                    handleTrade(data);
                } catch (error) {
                    console.error('Trade parse error:', error);
                }
            };

            ws.onerror = (error) => {
                console.error('WebSocket error:', error);
            };

            ws.onclose = () => {
                console.log('‚ùå Trades WebSocket closed');
                updateStatus(false, 'Disconnected');
                attemptReconnect();
            };

            // Depth WebSocket
            wsDepth = new WebSocket(`wss://stream.binance.com:9443/ws/${symbol}@depth20@100ms`);
            
            wsDepth.onopen = () => {
                console.log('‚úÖ Depth WebSocket connected');
            };

            wsDepth.onmessage = (event) => {
                try {
                    const data = JSON.parse(event.data);
                    handleDepth(data);
                } catch (error) {
                    console.error('Depth parse error:', error);
                }
            };

            wsDepth.onerror = (error) => {
                console.error('Depth WebSocket error:', error);
            };

            wsDepth.onclose = () => {
                console.log('‚ùå Depth WebSocket closed');
            };
        }

        function attemptReconnect() {
            if (reconnectAttempts >= MAX_RECONNECT_ATTEMPTS) {
                showAlert('danger', 'Connection Failed', 'Max reconnection attempts reached. Please refresh page.');
                return;
            }

            reconnectAttempts++;
            const delay = Math.min(1000 * Math.pow(2, reconnectAttempts), 30000); // Exponential backoff, max 30s
            
            console.log(`Reconnecting in ${delay/1000}s (attempt ${reconnectAttempts}/${MAX_RECONNECT_ATTEMPTS})...`);
            updateStatus(false, `Reconnecting in ${delay/1000}s...`);
            
            reconnectTimer = setTimeout(() => {
                connectWebSocket();
            }, delay);
        }

        function updateStatus(connected, text) {
            const dot = document.getElementById('statusDot');
            const aiStatus = document.getElementById('aiStatus');
            
            if (connected) {
                dot.classList.add('connected');
                aiStatus.textContent = 'Active & Analyzing';
            } else {
                dot.classList.remove('connected');
                aiStatus.textContent = text || 'Disconnected';
            }
        }

        // ==================== TRADE HANDLER ====================
        function handleTrade(data) {
            const price = parseFloat(data.p);
            const quantity = parseFloat(data.q);
            const isBuyerMaker = data.m;
            const value = price * quantity;
            
            if (lastPrice === 0) {
                lastPrice = price;
                startPrice = price;
            }
            lastPrice = price;

            // Delta
            const delta = isBuyerMaker ? -quantity : quantity;
            cumulativeDelta += delta;

            // Volume
            if (isBuyerMaker) {
                sellVolume += value;
            } else {
                buyVolume += value;
            }

            // Large orders
            if (value >= 10000) {
                largeOrders++;
            }

            // Volume profile
            const priceLevel = (Math.round(price * 10000) / 10000).toFixed(4);
            if (!volumeByPrice[priceLevel]) {
                volumeByPrice[priceLevel] = 0;
            }
            volumeByPrice[priceLevel] += value;

            // History
            const now = new Date();
            timestamps.push(now.toLocaleTimeString().slice(0, 8));
            deltaHistory.push(cumulativeDelta);
            priceHistory.push(price);
            volumeHistory.push(value);

            if (timestamps.length > 100) {
                timestamps.shift();
                deltaHistory.shift();
                priceHistory.shift();
                volumeHistory.shift();
            }

            // Calculate indicators
            calculateRSI();
            calculateEMA();
            
            updateUI();
            analyzeMarket();
        }

        // ==================== DEPTH HANDLER ====================
        function handleDepth(data) {
            orderBook.bids = data.bids.slice(0, 10);
            orderBook.asks = data.asks.slice(0, 10);
            calculateImbalance();
        }

        // ==================== TECHNICAL INDICATORS ====================
        function calculateRSI(period = 14) {
            if (priceHistory.length < period + 1) return;

            const changes = [];
            for (let i = 1; i < priceHistory.length; i++) {
                changes.push(priceHistory[i] - priceHistory[i - 1]);
            }

            const gains = changes.map(c => c > 0 ? c : 0);
            const losses = changes.map(c => c < 0 ? -c : 0);

            const avgGain = gains.slice(-period).reduce((a, b) => a + b, 0) / period;
            const avgLoss = losses.slice(-period).reduce((a, b) => a + b, 0) / period;

            if (avgLoss === 0) return 100;

            const rs = avgGain / avgLoss;
            const rsi = 100 - (100 / (1 + rs));
            
            rsiValues.push(rsi);
            if (rsiValues.length > 50) rsiValues.shift();

            // RSI Signal
            const rsiSignal = document.getElementById('rsiSignal');
            if (rsi < 30) {
                rsiSignal.textContent = 'OVERSOLD';
                rsiSignal.className = 'indicator-signal bullish';
            } else if (rsi > 70) {
                rsiSignal.textContent = 'OVERBOUGHT';
                rsiSignal.className = 'indicator-signal bearish';
            } else {
                rsiSignal.textContent = `${rsi.toFixed(1)}`;
                rsiSignal.className = 'indicator-signal neutral';
            }
        }

        function calculateEMA() {
            if (priceHistory.length < 2) return;

            const shortPeriod = 20;
            const longPeriod = 50;

            // Calculate EMA
            const calculateSingleEMA = (prices, period) => {
                const k = 2 / (period + 1);
                let ema = prices[0];
                for (let i = 1; i < prices.length; i++) {
                    ema = (prices[i] * k) + (ema * (1 - k));
                }
                return ema;
            };

            if (priceHistory.length >= shortPeriod) {
                const emaS = calculateSingleEMA(priceHistory.slice(-shortPeriod), shortPeriod);
                emaShort.push(emaS);
                if (emaShort.length > 50) emaShort.shift();
            }

            if (priceHistory.length >= longPeriod) {
                const emaL = calculateSingleEMA(priceHistory.slice(-longPeriod), longPeriod);
                emaLong.push(emaL);
                if (emaLong.length > 50) emaLong.shift();
            }

            // MA Cross Signal
            if (emaShort.length >= 2 && emaLong.length >= 2) {
                const maSignal = document.getElementById('maSignal');
                const currentCross = emaShort[emaShort.length - 1] > emaLong[emaLong.length - 1];
                const previousCross = emaShort[emaShort.length - 2] > emaLong[emaLong.length - 2];

                if (currentCross && !previousCross) {
                    maSignal.textContent = 'BULLISH CROSS';
                    maSignal.className = 'indicator-signal bullish';
                } else if (!currentCross && previousCross) {
                    maSignal.textContent = 'BEARISH CROSS';
                    maSignal.className = 'indicator-signal bearish';
                } else if (currentCross) {
                    maSignal.textContent = 'ABOVE';
                    maSignal.className = 'indicator-signal bullish';
                } else {
                    maSignal.textContent = 'BELOW';
                    maSignal.className = 'indicator-signal bearish';
                }
            }
        }

        // ==================== UI UPDATES ====================
        function updateUI() {
            // Price
            document.getElementById('currentPrice').textContent = '$' + lastPrice.toFixed(lastPrice < 1 ? 6 : 2);
            
            const changePercent = ((lastPrice - startPrice) / startPrice * 100);
            const priceChangeEl = document.getElementById('priceChange');
            priceChangeEl.textContent = (changePercent >= 0 ? '+' : '') + changePercent.toFixed(2) + '%';
            priceChangeEl.className = 'price-change ' + (changePercent >= 0 ? 'positive' : 'negative');

            // Delta
            const deltaEl = document.getElementById('deltaValue');
            const deltaClass = cumulativeDelta > 0 ? 'positive' : cumulativeDelta < 0 ? 'negative' : 'neutral';
            deltaEl.className = 'metric-value ' + deltaClass;
            deltaEl.textContent = cumulativeDelta.toFixed(2);

            const deltaSubtitle = document.getElementById('deltaSubtitle');
            deltaSubtitle.textContent = cumulativeDelta > 100 ? 'üü¢ Strong Buy' : cumulativeDelta < -100 ? 'üî¥ Strong Sell' : '‚ö™ Balanced';

            // Volume
            const totalVolume = buyVolume + sellVolume;
            document.getElementById('volumeValue').textContent = '$' + (totalVolume / 1000).toFixed(1) + 'K';

            // Ratio
            const ratio = buyVolume / (sellVolume || 1);
            const ratioEl = document.getElementById('ratioValue');
            ratioEl.textContent = ratio.toFixed(2);
            ratioEl.className = 'metric-value ' + (ratio > 1.2 ? 'positive' : ratio < 0.8 ? 'negative' : 'neutral');
            
            document.getElementById('ratioSubtitle').textContent = ratio > 1.2 ? 'üü¢ Buy Dominant' : ratio < 0.8 ? 'üî¥ Sell Dominant' : '‚ö™ Balanced';

            // Chart
            mainChart.data.labels = timestamps;
            mainChart.data.datasets[0].data = deltaHistory;
            mainChart.update('none');

            // Volume signal
            const volSignal = document.getElementById('volSignal');
            const avgVol = volumeHistory.reduce((a, b) => a + b, 0) / volumeHistory.length;
            const recentVol = volumeHistory.slice(-10).reduce((a, b) => a + b, 0) / 10;
            
            if (recentVol > avgVol * 1.5) {
                volSignal.textContent = 'HIGH';
                volSignal.className = 'indicator-signal bullish';
            } else if (recentVol < avgVol * 0.5) {
                volSignal.textContent = 'LOW';
                volSignal.className = 'indicator-signal bearish';
            } else {
                volSignal.textContent = 'NORMAL';
                volSignal.className = 'indicator-signal neutral';
            }

            // Large orders
            const largeSignal = document.getElementById('largeSignal');
            if (largeOrders > 15) {
                largeSignal.textContent = `HIGH (${largeOrders})`;
                largeSignal.className = 'indicator-signal bullish';
            } else if (largeOrders > 5) {
                largeSignal.textContent = `NORMAL (${largeOrders})`;
                largeSignal.className = 'indicator-signal neutral';
            } else {
                largeSignal.textContent = `LOW (${largeOrders})`;
                largeSignal.className = 'indicator-signal bearish';
            }
        }

        function calculateImbalance() {
            if (orderBook.bids.length === 0 || orderBook.asks.length === 0) return;

            const bidVolume = orderBook.bids.reduce((sum, [p, q]) => sum + parseFloat(q) * parseFloat(p), 0);
            const askVolume = orderBook.asks.reduce((sum, [p, q]) => sum + parseFloat(q) * parseFloat(p), 0);
            
            const totalVolume = bidVolume + askVolume;
            const bidPercent = (bidVolume / totalVolume * 100);

            const imbalanceEl = document.getElementById('imbalanceValue');
            imbalanceEl.textContent = bidPercent.toFixed(1) + '%';
            
            const subtitle = document.getElementById('imbalanceSubtitle');
            
            if (bidPercent > 65) {
                imbalanceEl.className = 'metric-value positive';
                subtitle.textContent = 'üü¢ Strong Support';
            } else if (bidPercent < 35) {
                imbalanceEl.className = 'metric-value negative';
                subtitle.textContent = 'üî¥ Weak Support';
            } else {
                imbalanceEl.className = 'metric-value neutral';
                subtitle.textContent = '‚ö™ Balanced';
            }
        }

        // ==================== ML ANALYSIS ====================
        function analyzeMarket() {
            if (deltaHistory.length < 20 || priceHistory.length < 20) return;

            // Divergence detection
            const recentDelta = deltaHistory.slice(-10);
            const recentPrice = priceHistory.slice(-10);
            
            const deltaTrend = recentDelta[recentDelta.length - 1] - recentDelta[0];
            const priceTrend = recentPrice[recentPrice.length - 1] - recentPrice[0];
            
            const divergence = (deltaTrend > 50 && priceTrend < -0.001) || (deltaTrend < -50 && priceTrend > 0.001);
            
            // Divergence signal
            const divSignal = document.getElementById('divSignal');
            if (deltaTrend > 50 && priceTrend < -0.001) {
                divSignal.textContent = 'BULLISH DIV';
                divSignal.className = 'indicator-signal bullish';
            } else if (deltaTrend < -50 && priceTrend > 0.001) {
                divSignal.textContent = 'BEARISH DIV';
                divSignal.className = 'indicator-signal bearish';
            } else {
                divSignal.textContent = 'NONE';
                divSignal.className = 'indicator-signal neutral';
            }

            // POC
            const sortedPrices = Object.keys(volumeByPrice)
                .map(p => parseFloat(p))
                .sort((a, b) => volumeByPrice[b.toFixed(4)] - volumeByPrice[a.toFixed(4)]);
            
            if (sortedPrices.length > 0) {
                const poc = sortedPrices[0];
                const nearPOC = Math.abs(lastPrice - poc) / poc < 0.005;
                
                const pocSignal = document.getElementById('pocSignal');
                if (nearPOC) {
                    pocSignal.textContent = 'NEAR POC';
                    pocSignal.className = 'indicator-signal bullish';
                } else {
                    pocSignal.textContent = 'AWAY';
                    pocSignal.className = 'indicator-signal neutral';
                }
            }

            // Calculate ML Confidence Score
            let confidence = 0;
            let signals = [];

            // Divergence (40 points)
            if (divergence) {
                confidence += 40;
                signals.push(deltaTrend > 0 ? 'bullish_div' : 'bearish_div');
            }

            // RSI (20 points)
            if (rsiValues.length > 0) {
                const rsi = rsiValues[rsiValues.length - 1];
                if (rsi < 30) {
                    confidence += 20;
                    signals.push('rsi_oversold');
                } else if (rsi > 70) {
                    confidence += 20;
                    signals.push('rsi_overbought');
                }
            }

            // Order book imbalance (20 points)
            const imbalance = parseFloat(document.getElementById('imbalanceValue').textContent);
            if (imbalance > 65 || imbalance < 35) {
                confidence += 20;
                signals.push(imbalance > 65 ? 'strong_bids' : 'weak_bids');
            }

            // Large orders (10 points)
            if (largeOrders > 10) {
                confidence += 10;
                signals.push('institutional_activity');
            }

            // Volume (10 points)
            const avgVol = volumeHistory.reduce((a, b) => a + b, 0) / volumeHistory.length;
            const recentVol = volumeHistory.slice(-10).reduce((a, b) => a + b, 0) / 10;
            if (recentVol > avgVol * 1.5) {
                confidence += 10;
                signals.push('high_volume');
            }

            // Update confidence display
            document.getElementById('confidenceScore').textContent = confidence + '%';
            document.getElementById('confidenceFill').style.width = confidence + '%';
            
            const confText = document.getElementById('confidenceText');
            if (confidence >= 70) {
                confText.textContent = 'üü¢ HIGH CONFIDENCE - Strong setup detected';
                confText.style.color = '#00FF88';
            } else if (confidence >= 40) {
                confText.textContent = 'üü° MEDIUM CONFIDENCE - Proceed with caution';
                confText.style.color = '#FFB800';
            } else {
                confText.textContent = 'üî¥ LOW CONFIDENCE - Wait for better setup';
                confText.style.color = '#FF3366';
            }

            // Determine market signal and AI message
            const signalEl = document.getElementById('marketSignal');
            const aiMessage = document.getElementById('aiMessage');
            const tradeRec = document.getElementById('tradeRec');
            const recAction = document.getElementById('recAction');
            const recDetails = document.getElementById('recDetails');

            let bullishSignals = signals.filter(s => 
                s.includes('bullish') || s === 'rsi_oversold' || s === 'strong_bids'
            ).length;
            
            let bearishSignals = signals.filter(s => 
                s.includes('bearish') || s === 'rsi_overbought' || s === 'weak_bids'
            ).length;

            if (confidence >= 70 && bullishSignals > bearishSignals) {
                signalEl.textContent = 'BULLISH';
                signalEl.className = 'signal-value bullish';
                
                aiMessage.innerHTML = `<strong>üü¢ HIGH PROBABILITY BULLISH SETUP</strong><br>
                Multiple indicators aligned: ${signals.join(', ').replace(/_/g, ' ')}. 
                Delta showing accumulation while price declined. ${largeOrders} large institutional orders detected. 
                <strong>Consider LONG position with proper risk management.</strong>`;
                
                // Show trade recommendation
                tradeRec.style.display = 'block';
                tradeRec.className = 'trade-rec bullish';
                recAction.textContent = 'üü¢ CONSIDER LONG';
                recAction.className = 'rec-action bullish';
                
                const stopDistance = lastPrice * 0.015; // 1.5%
                const targetDistance = lastPrice * 0.03; // 3%
                
                recDetails.innerHTML = `
                    <div class="rec-detail">
                        <div class="rec-detail-label">Entry</div>
                        <div class="rec-detail-value">$${lastPrice.toFixed(lastPrice < 1 ? 6 : 2)}</div>
                    </div>
                    <div class="rec-detail">
                        <div class="rec-detail-label">Stop Loss</div>
                        <div class="rec-detail-value">$${(lastPrice - stopDistance).toFixed(lastPrice < 1 ? 6 : 2)}</div>
                    </div>
                    <div class="rec-detail">
                        <div class="rec-detail-label">Target</div>
                        <div class="rec-detail-value">$${(lastPrice + targetDistance).toFixed(lastPrice < 1 ? 6 : 2)}</div>
                    </div>
                    <div class="rec-detail">
                        <div class="rec-detail-label">R:R Ratio</div>
                        <div class="rec-detail-value">1:2</div>
                    </div>
                `;
            } else if (confidence >= 70 && bearishSignals > bullishSignals) {
                signalEl.textContent = 'BEARISH';
                signalEl.className = 'signal-value bearish';
                
                aiMessage.innerHTML = `<strong>üî¥ HIGH PROBABILITY BEARISH SETUP</strong><br>
                Multiple indicators aligned: ${signals.join(', ').replace(/_/g, ' ')}. 
                Delta showing distribution while price rose. Selling pressure increasing. 
                <strong>Consider SHORT position or EXIT longs.</strong>`;
                
                tradeRec.style.display = 'block';
                tradeRec.className = 'trade-rec bearish';
                recAction.textContent = 'üî¥ CONSIDER SHORT';
                recAction.className = 'rec-action bearish';
                
                const stopDistance = lastPrice * 0.015;
                const targetDistance = lastPrice * 0.03;
                
                recDetails.innerHTML = `
                    <div class="rec-detail">
                        <div class="rec-detail-label">Entry</div>
                        <div class="rec-detail-value">$${lastPrice.toFixed(lastPrice < 1 ? 6 : 2)}</div>
                    </div>
                    <div class="rec-detail">
                        <div class="rec-detail-label">Stop Loss</div>
                        <div class="rec-detail-value">$${(lastPrice + stopDistance).toFixed(lastPrice < 1 ? 6 : 2)}</div>
                    </div>
                    <div class="rec-detail">
                        <div class="rec-detail-label">Target</div>
                        <div class="rec-detail-value">$${(lastPrice - targetDistance).toFixed(lastPrice < 1 ? 6 : 2)}</div>
                    </div>
                    <div class="rec-detail">
                        <div class="rec-detail-label">R:R Ratio</div>
                        <div class="rec-detail-value">1:2</div>
                    </div>
                `;
            } else {
                signalEl.textContent = 'NEUTRAL';
                signalEl.className = 'signal-value neutral';
                
                aiMessage.innerHTML = `<strong>‚ö™ NO CLEAR SETUP</strong><br>
                Confidence score: ${confidence}%. Market showing mixed signals. 
                ${signals.length > 0 ? `Active signals: ${signals.join(', ').replace(/_/g, ' ')}.` : 'No strong signals detected.'}
                <strong>Wait for higher probability setup (70%+). Patience is key.</strong>`;
                
                tradeRec.style.display = 'none';
            }

            // ML Predictions (simple momentum-based)
            const pred5min = document.getElementById('pred5min');
            const pred15min = document.getElementById('pred15min');
            const revProb = document.getElementById('revProb');

            if (priceHistory.length >= 20) {
                const momentum5 = priceHistory[priceHistory.length - 1] - priceHistory[priceHistory.length - 5];
                const momentum15 = priceHistory[priceHistory.length - 1] - priceHistory[priceHistory.length - Math.min(15, priceHistory.length - 1)];
                
                if (momentum5 > 0) {
                    pred5min.textContent = 'üìà UP';
                    pred5min.className = 'indicator-signal bullish';
                } else if (momentum5 < 0) {
                    pred5min.textContent = 'üìâ DOWN';
                    pred5min.className = 'indicator-signal bearish';
                } else {
                    pred5min.textContent = '‚û°Ô∏è FLAT';
                    pred5min.className = 'indicator-signal neutral';
                }

                if (momentum15 > 0) {
                    pred15min.textContent = 'üìà UP';
                    pred15min.className = 'indicator-signal bullish';
                } else if (momentum15 < 0) {
                    pred15min.textContent = 'üìâ DOWN';
                    pred15min.className = 'indicator-signal bearish';
                } else {
                    pred15min.textContent = '‚û°Ô∏è FLAT';
                    pred15min.className = 'indicator-signal neutral';
                }

                // Reversal probability based on divergence and RSI
                if (divergence) {
                    revProb.textContent = 'HIGH (70%+)';
                    revProb.className = 'indicator-signal bullish';
                } else if (rsiValues.length > 0) {
                    const rsi = rsiValues[rsiValues.length - 1];
                    if (rsi < 30 || rsi > 70) {
                        revProb.textContent = 'MEDIUM (40-70%)';
                        revProb.className = 'indicator-signal neutral';
                    } else {
                        revProb.textContent = 'LOW (<40%)';
                        revProb.className = 'indicator-signal bearish';
                    }
                } else {
                    revProb.textContent = 'LOW (<40%)';
                    revProb.className = 'indicator-signal bearish';
                }
            }
        }

        // ==================== ALERTS ====================
        function showAlert(type, title, message) {
            const alert = document.getElementById('alert');
            const alertTitle = document.getElementById('alertTitle');
            const alertMessage = document.getElementById('alertMessage');
            
            alert.className = 'alert ' + type + ' show';
            alertTitle.textContent = title;
            alertMessage.textContent = message;
            
            setTimeout(() => {
                alert.classList.remove('show');
            }, 5000);
        }

        // ==================== INITIALIZE ====================
        async function initialize() {
            document.getElementById('loading').style.display = 'flex';
            
            const symbolsLoaded = await fetchSymbols();
            
            if (symbolsLoaded) {
                connectWebSocket();
                
                setTimeout(() => {
                    document.getElementById('loading').style.display = 'none';
                    showAlert('success', 'System Ready', 'QUANTUM AI initialized with 600+ symbols');
                }, 2000);
            } else {
                setTimeout(initialize, 5000); // Retry if failed
            }
        }

        initialize();
    </script>
</body>
</html>
